# Домашнее задание 2

## Содержимое
- sum_squares.py - сравнение синхронного/потокового/процессного подсчета суммы квадратов.
- delay_app.py + send_delay_requests.py - сервер с задержкой и нагрузочный скрипт на 100 запросов.
- jokes_app.py - FastAPI c ручками /best и /random для анекдотов.
- async_timer.py + async_timer_app.py - асинхронный контекстный менеджер и демонстрационная ручка.
- async_scanner.py + urls.txt - асинхронный сканер сайтов с ограничением параллелизма.
- requirements.txt - зависимости для всего набора примеров.

## Установка зависимостей

pip install -r requirements.txt


## 1. CPU-bound: процессы vs потоки
Запуск:
python sum_squares.py

Потоковая версия не ускоряет CPU-bound из-за GIL, а процессная обычно заметно быстрее синхронной при наличии нескольких ядер. Все реализации возвращают одинаковую сумму.

## 2. Асинхронное приложение с задержкой
Запуск сервера:

python delay_app.py

Нагрузочный скрипт (по умолчанию 100 запросов 1–60 сек):

python send_delay_requests.py http://127.0.0.1:8000 100

Ожидание последнего ответа близко к максимальной задержке среди запросов (~60 секунд) плюс сетевые накладные расходы, так как сервер обслуживает запросы конкурентно.

## 3. Интеграция с anekdot.ru
Запуск сервиса:

python jokes_app.py

Примеры запросов:
- GET /best?day=01-January-2025
- GET /random
Парсер устойчив к небольшим изменениям HTML собирает текст, ссылку на автора (если есть) и рейтинг. Для /best дополнительно сортирует по рейтингу по убыванию.

## 4. Асинхронный контекстный менеджер
Запуск демонстрационного сервера:

python async_timer_app.py

Ручка /random-sleep использует AsyncTimer, чтобы измерить время случайной паузы.

## 5. Управление библиотекой
См. файл library.py (классы Book/TextBook/Library).
 
## 6. Асинхронный сканер сайтов
Пример запуска:

python async_scanner.py --input urls.txt --output results.txt --limit 10

Параллелизм ограничен --limit, результаты пишутся в results.txt.

## Что получилось и трудности
- Для сетевых примеров добавлены таймауты и обработка ошибок, чтобы скрипты не зависали.
- Парсинг anekdot.ru сделан через BeautifulSoup; структура сайта может меняться, поэтому добавлен фолбэк.
- В delay-примере нагрузочный скрипт легко масштабируется изменением параметра --count.

